{
  "builders": [{
    "type": "vmware-vmx",
    "headless": true,
    "shutdown_command": "shutdown /s /t 10 /f /d p:4:1 /c \"Packer Shutdown\"",
    "communicator": "winrm",
    "winrm_username": "vagrant",
    "winrm_password": "vagrant",
    "source_path": "output-vmware-iso/packer-vmware-iso.vmx"
  }],
  "provisioners": [{
    "type": "powershell",
    "scripts": [
      "./scripts/docker/add-docker-group.ps1",
      "./scripts/docker/install-docker.ps1",
      "./scripts/docker/open-docker-insecure-port.ps1",
      "./scripts/docker/remove-docker-key-json.ps1",
      "./scripts/docker/disable-windows-defender.ps1"
    ]
  }, {
    "type": "windows-restart"
  }, {
    "type": "windows-shell",
    "scripts": [
      "./scripts/compile-dotnet-assemblies.bat",
      "./scripts/uac-enable.bat",
      "./scripts/compact.bat"
    ]
  }],
  "post-processors": [{
    "type": "vagrant",
    "keep_input_artifact": true,
    "output": "output-vagrant-box/windows_2016_docker_core_{{.Provider}}.box",
    "vagrantfile_template": "vagrantfile-windows_2016.template"
  }]
}